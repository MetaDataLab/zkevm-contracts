const { ethers } = require('hardhat');
const deployParameters = require('../deploy_parameters.json');

async function main() {
    const currentProvider = new ethers.providers.JsonRpcProvider('http://165.154.12.31:8545');
    const FEE_DATA = {
        maxFeePerGas: ethers.utils.parseUnits(deployParameters.maxFeePerGas, 'gwei'),
        maxPriorityFeePerGas: ethers.utils.parseUnits(deployParameters.maxPriorityFeePerGas, 'gwei'),
    };
    currentProvider.getFeeData = async () => FEE_DATA;
    const sequenceSender = new ethers.Wallet('0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80', currentProvider);
    const txdata = '0xa50a164b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000008882bbb915ea37043a36ab6fef25794d62dfa994e115c0a52505d207aa19906d00000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000300031c618c5d3f9dd0a2d90536ac5ed99f5acd84c6fc2e51a4391e94e9c4527421189423fd0d1a680a4f7d39b6c26c19f4b831df1301c61f1a516ab7637379c2ee14f956a73c32ca7cf5a498b73c667f3c8b6339a54efad622474b41256ce9596526ed672c2957c1e1ec7cee5051183a0c8dbc82a77fa8bb7fcaa0e49e5599a534038a39d84c69f093a99e1dad694afc198a2ba6e4c01e7096eee275552f02f4102348fe8fe82739e7e8951e5c3d18a0bca82dcc10921e70af13c3eb1470fc772b012983ed6456a4e8798707f9d16d016cb728a7dd26a61298a1942de7d40e320a1c911773f33c4527dcc06e281b587a58e57fd7ca6676e08facded68b366dc6d31a60e69e385773f6b7ec77cd23044d925c196c8033168392bebb1f83fb92d776301ab68a25db77e6854f66070c95f4e9cef4598faa038f9e631ddb91c55d9b762a691fee15c18a22b5a2c697a24bc2e6da932a64b32d88897b79087a8b339c682ac047b25e5326e9c52de328966d612a18743a25e42dec8f81a6c63a24aaff0e18e521dd4b0b1c3570f2707d090668ac884cfefdbf4485bc3eaabc897d8e2426020029b7073b5226e8ba869a2f6fae92d4d266268186e9033146b97884bf158328a753c55db48610f8b0a80f548757950c080589bcacd448ddea5a32c84c0fc01dec5e00c80285cbf848170f64290afd8ead435329b1a54f1fa1a48d3fdeaa1d1dab7139b29b1ff6f15ad6ab3700abbfb5f011829a859905d4db2dbbff1184250dd4961a5f4d356f264af1bb4738b42e659ca457c228b06a827798429797c3e510544a08362b980e53eab917aff2f364f12953bbca4612ce562525e4f944d47c16397919fe63820e842efd47c56cfb56fb8803a6522ef6dc57d2fb992ce5f5ec285a474c17dbf3f3ce76cef599318005e0aec9a7f9169f54b743fc1bc2934166259eb3e16f0f06303a908479d189c199578e95ca0bd678f2e67059241361074a0f4768f3966a9574d4d1300bf2e085e2f3c7eee8d888b6a6040ff98b2842f6970e79d5e90dc77ed7eca67362b21ffe72612b9f16fee2420df641d744e9fb9fd5';
    // eslint-disable-next-line no-console
    console.log(txdata);
    const gasLimit = ethers.BigNumber.from(1000000); // Put 1 Million, aprox 650k are necessary
    const gasPrice = ethers.BigNumber.from(ethers.utils.parseUnits('100', 'gwei'));
    const tx = {
        to: '0x48515ADf06d042b4001b88670F780f1aAed6653d',
        value: '0x0',
        gasLimit: gasLimit.toHexString(),
        gasPrice: gasPrice.toHexString(),
        data: txdata,
    };
    const res = await (await sequenceSender.sendTransaction(tx)).wait();
    // eslint-disable-next-line no-console
    console.log(res);
}

main().catch((e) => {
    console.error(e);
    process.exit(1);
});
